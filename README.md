# Rad-5GC_GWについて

5GC AUSF/UDMを認証サーバとして、EAP−AKA'を用いた802.1X認証を行うための仲介ゲートウェイノードです。  
Go言語の学習を目的としており、コードに関しては初心者相当と見ておいてください。  
現バージョンはfree5GC対向のみ動作確認しており、以下のような接続構成で利用することを想定しています。  

> [UE/STA] --(802.1X)-- [Wi-Fi AP] --(Radius)-- [Rad-5GC GW] --(SBI N12 API)-- [free5GC]

Rad-5GC GWはN12インターフェースでAUSFと通信しますが、現バージョンはOAuthやHTTPSには対応できていないため、free5GCの設定ではOAuth 2.0を無効にしてください。  
また、Rad-5GC GWをfree5GCとは別のホストに置く場合は、N12 URIの兼ね合いにより、間にリバースプロキシ(nginxなど)を挟む必要があります。  

Rad-5GC GWは、802.1X認証用Wi-Fi APから見るとRadiusサーバとしての役割を担います。  
Wi-Fiアクセスポイントの802.1X認証設定では、Rad-5GC GWのIPアドレスを認証サーバとして登録することになります。  
なお、Accountingには対応していませんので、必要ならば別途FreeRadiusなどを立てて対応してください。  

---
### ファイル構成

現行バージョンは以下4つのソースファイルと、1つの設定ファイルで構成されます。  
- ソースファイル
  - configGetFromYaml.go
  - eapIdManagement.go
  - n12client.go
  - rad5gcGW.go (main)
- 設定ファイル
  - confrad5gcgw.yaml

ビルドする際はソースのみを対象とし、設定ファイルは含めないようお願いします。  
また、設定ファイルはファイル名を変更せず、実行バイナリと同じディレクトリに置いてください。  
設定項目については、ファイル内の説明コメントを参照願います。  

---
### 起動・ログ生成・停止
普通にGoの実行バイナリとして起動するのみです。  
> `rad5gcGW`

実行後、ログファイルは、設定ファイル内で指定したファイル名で実行バイナリと同じディレクトリに生成されます。  
停止については現状、killやCtrl+C等で強制停止させてください。  
（将来的にはデーモンとしてサービス登録できるよう開発していければと思います）
